<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/main/resources/css/admin/admin.css">
    <link rel="stylesheet" href="/main/resources/css/admin/jquery-ui.css">
    <link rel="stylesheet" href="/main/resources/css/admin/swiper.css">
	
	<!-- <script src="/resources/js/plugin/jquery.min.js?"></script>
	<script src="/resources/js/plugin/jquery-ui.min.js?"></script>
	<script src="/resources/js/plugin/jquery.form.min.js?"></script>
	<script src="/resources/js/plugin/jquery.cookie.js?"></script>
	<script src="/resources/js/plugin/jquery.fileDownload.js?"></script> -->

	<!-- <script src="/resources/js/plugin/ckeditor/ckeditor.js?"></script><style>.cke{visibility:hidden;}</style>
	<script src="/resources/js/plugin/ckeditor/adapters/jquery.js?"></script>
	<script src="/resources/js/plugin/microfiche.js?"></script>
	<script src="/resources/js/plugin/Chart.min.js?"></script>
	<script src="/resources/js/plugin/printThis.js?"></script> -->

	<!-- <script src="/resources/js/common/common.js?"></script>
	<script src="/resources/js/common/base.js?"></script>
	<script src="/resources/js/common/swiper.js?"></script>
	<script src="/resources/js/common/zipcode.js?"></script>
	<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js?"></script>
	<script charset="UTF-8" type="text/javascript" src="//t1.daumcdn.net/postcode/api/core/211103/1635999227231/211103.js"></script>
	<script type="text/javascript" src="/resources/js/admin/productManagement/pmList.js?"></script> -->

	<!-- -----------윤희상 html 공통부분 START------------- -->
	<script defer type="text/javascript" src="/main/js/common/cFuncs.js"></script>
	<script defer type="text/javascript" src="/common/js/cPagingModule.js"></script>
	<script defer type="text/javascript" src="/main/js/admin/cGetAdminCommonModule.js"></script>
	<script defer type="text/javascript" src="/main/js/admin/cGetAdminPageMenu.js"></script>
	<script defer type="text/javascript" src="/main/js/admin/cPopularItemListAdm.js"></script>
	<script defer type="text/javascript" src="/main/js/common/jsonToXMLToExcel.js"></script>

	<!-- 엑셀 다운로드를 위해서 필요한 모듈임 -->
	<script defer type="text/javascript" src="/main/js/common/jsonToXMLToExcel.js"></script>
	<!-- <script type="text/javascript" src="/xlsx.full.min.js"></script> -->
	<script type="text/javascript" src="/FileSaver.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.3.0/exceljs.min.js"></script>

	<!-- <script type="text/javascript" src="/resources/js/admin/productManagement/pmList.js?"></script> -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<!-- <link rel="stylesheet" type="text/css" href="/commonpf2.css"/> -->
	<script type="text/javascript" src="/common/resources/jquery/jquery-3.6.0.min.js"></script>
	<!-- <script type="text/javascript" src="/jquery.ajax-cross-origin.min.js"></script> -->
	<!-- <script type="text/javascript" src="/jquery-ui.js"></script> -->
	<script type="text/javascript" src="/main/js/jquery-ui.min.js"></script>

	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!--아래 한줄은 http, https reidirection에 따른 ajax 통신 문제시 content mixed문제를 조정하기 위해 추가함-->
	<!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/> -->
	<!--이미지 도구모음 금지-->
	<meta http-equiv="imagetoolbar" context="no"></head>
	<!--아래 2줄은 ajax호출시 header, token을 같이 넘길때 undefined error가 발생하므로 반드시 추가해야 함-->
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
	<!-- ----------------------------------------------------------------------- -->
	<!-- iOS Part -->
	<!-- 주소창 등의 웹 브라우저 UI를 표시하지 않기 -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<!-- 상태 바의 스타일을 지정 -->
	<!-- <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">-->
	<!-- 홈 화면에서 표시되는 앱 이름을 지정 -->
	<!-- <meta name="apple-mobile-web-app-title" content="Timer">-->
	<!-- 홈 화면에서 표시되는 앱 아이콘을 지정 -->
	<!-- <link rel="apple-touch-icon" href="icons/icon-152x152.png">-->

	<link rel="apple-touch-icon" href="touch-icon-iphone.png">
	<link rel="apple-touch-icon" sizes="152x152" href="touch-icon-ipad.png">
	<link rel="apple-touch-icon" sizes="167x167" href="touch-icon-ipad-retina.png">
	<link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-retina.png">
	<!-- Android part -->
	<!-- 웹 앱 매니페스트를 읽어 들이기 -->
	<link rel="manifest" type="text/json"  href="/manifest.json">
	<script>history.replaceState({}, null, location.pathname);</script>
	<!-- -----------윤희상 html 공통부분 END------------- -->
	
	<title>인기상품관리</title>
</head>
<body>
<div class="wrap">
	<div class="header">
		<div class="top">
			<h1>
				<img src="/main/resources/images/admin/admin_header_logo.png" alt="나들가게 이음몰" onclick="location.href='/main/html/admin/totalOrderListAdm.html';" style="cursor:pointer;"> 
				<img src="/main/resources/images/admin/sitetit.gif" alt="통합관리자" onclick="location.href='/main/html/admin/totalOrderListAdm.html';" style="cursor:pointer;">
			</h1>
			<div class="logout">
            </div>
		</div>
		<ul class="gnb" id="gnb">
		</ul>
	</div>
	<!-- //header -->
	
	<!-- container -->
	<div class="container">
		<div class="lnb" id="lnb">
		</div>
			<!-- contents -->
			<div class="contents">
				<h3>인기상품관리</h3>
				<form name="frm" id="frm" action="/admin/productManagement/pmList" method="post">
					<input type="hidden" id="tp" name="TP" value="">
					<input type="hidden" name="idx" value="0">
					<div class="search_area">
						<table class="table_row">
							<colgroup><col width="120"><col width="280"><col width="120"><col width="*"></colgroup>
							<tbody>
								<tr>
									<th><span>순위구분</span></th>
									<td class="checks">
										<input type="radio" id="search_sort" name="search_sort" value="1" val="1" checked> <label for="search_sort">판매횟수</label>
										<input type="radio" id="search_sort" name="search_sort" value="2" val="1"> <label for="search_sort">판매금액</label>
									</td>
									<th><span></span></th>
									<td>
									</td>
								</tr>
								<tr>
									<th><span>기간</span></th>
									<td colspan="3">
										<input type="text" name="search_reg_date_start" id="search_reg_date_start" class="w100 datepicker1" value=""> ~ 
										<input type="text" name="search_reg_date_end" id="search_reg_date_end" class="w100 datepicker1" value="">
										<span class="search_scope">
											<button type="button" class="btn_ss01" onclick="set_date_prev('search_reg_date_start',2); set_today('search_reg_date_end');"><span>D-2</span></button>
											<button type="button" class="btn_ss01" onclick="set_date_prev('search_reg_date_start',1); set_today('search_reg_date_end');"><span>D-1</span></button>
											<button type="button" class="btn_ss01" onclick="set_today('search_reg_date_start'); set_today('search_reg_date_end');"><span>오늘</span></button>
											<button type="button" class="btn_ss01" onclick="set_date_prev('search_reg_date_start',7); set_today('search_reg_date_end');"><span>7일간</span></button>
											<button type="button" class="btn_ss01" onclick="set_date_prev('search_reg_date_start',15); set_today('search_reg_date_end');"><span>15일간</span></button>
											<button type="button" class="btn_ss01" onclick="setDateAll();"><span>전체</span></button>
										</span>
									</td>
								</tr>
							</tbody>
						</table>
						<div class="search_btn">
							<button type="button" class="btn_bic" style="cursor:pointer;">검색</button>
						</div>
					</div>
				<div class="result_area">
					<div class="result_info">
						<p class="txt_total">총 <strong id="txt_total_count"></strong> 건</p>
						<div class="btn_down">
							<button type="button" class="btn_ss01" onclick="excelDownload();"><span class="btn_excel">목록 다운로드</span></button>
							<select name="list_cnt" id="list_cnt" style="width:55px;" value="5">
								<option value="5">5</option>
								<option value="20">20</option>
								<option value="50">50</option>
								<option value="100">100</option>
								<option value="300">300</option>
							</select>
						</div>
					</div>
					<table class="table_col">
						<colgroup>
							<col width="45">
							<col width="40">
							<col width="*">
							<col width="78">
							<col width="60">
							<col width="90">
							<col width="75">
							<col width="75">
							<col width="150">
							<col width="150">
						</colgroup>
						<thead>
							<tr>
								<th>번호</th>
								<th>이미지</th>
								<th>상품명</th>
								<th>단가</th>
								<th>판매가</th>
								<th>행사구분</th>
								<th>판매횟수</th>
								<th>판매금액</th>
								<th>등록일</th>
								<th>수정일</th>
							</tr>
						</thead>
						<tbody id="adm_popular_item_list">						
						</tbody>
					</table>
					<div class="page" id="pagingDiv">
                        <!-- 2022.03.21 정길웅 클릭한 페이지의 class를 on으로 변경해야함. -->
                    </div>
				</div>
			</form>
		</div>
		<!-- //contents -->
	</div>
	<!-- //container -->
</div>
<script type="text/javascript">
	// 상품 리스트 엑셀 다운로드
	/* function productFanListToExcel(){
		var URL = "/admin/productManagement/productFanListToExcel?type=excel";	
		var param = $("#frm").serializeArray();
		
		if($("#frmdown").length == 0) {
			$("<form>")
			.attr("id", "frmdown")
			.attr("action", URL)
			.attr("method", "post")
			.appendTo("body");
		}
		
		$("#frmdown").empty();
		
		for( var i = 0 ;  i < param.length ; i++){
			if (param[i].name == "list_cnt") {
				$("#frmdown").append($("<input type='hidden' name='"+"list_cnt"+"' />").attr("value", 3000000));
			} else {
				$("#frmdown").append($("<input type='hidden' name='"+param[i].name+"' />").attr("value", param[i].value));
			}
		}
		$("#frmdown").submit();
	} */
	
	jQuery(function(){
		//lnb, rnb 만들어주는 함수
		getMenuListAjax("popularItemListAdm.html", initPage);
	});

	function initPage(){
		$.datepicker.setDefaults({
                dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
                dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'], 
                monthNamesShort: ['1','2','3','4','5','6','7','8','9','10','11','12'],
                monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
                yearSuffix: '년',
                dateFormat: 'yy-mm-dd',
                showOn: "both",
                buttonImage : "/main/resources/images/common/calendar.png",
                buttonImageOnly: true,
                showMonthAfterYear:true,
                constrainInput: true,
				changeMonth: true,
				changeYear: true      
        });
		$('input[name="search_reg_date_start"]').datepicker();
		$('input[name="search_reg_date_end"]').datepicker();
		
		$('input[name="search_reg_date_start"]').datepicker("setDate", "today");
		$('input[name="search_reg_date_end"]').datepicker("setDate", "today");


		if ( $.trim($("input[name='search_cancel_date_start']").val()) != "" || $.trim($("input[name='search_cancel_date_end']").val()) != "" ){
			$("#searchOpt").show();
		}

		//전역변수
		//var gTotalData;
		//var globalCurrentPage = 1;

		document.body.style.cursor = "wait";
		globalgetListCount = $("#list_cnt option:selected").val(); 
		eventSearchItem( 1);
		document.body.style.cursor = "default";

		//검색버튼 클릭
		// $(".btn_bic").click(function(){
		$(".btn_bic").on('click', function(){
			document.body.style.cursor = "wait";
			globalgetListCount = $("#list_cnt option:selected").val();
			eventSearchItem(1);
			document.body.style.cursor = "default";
		});

		//리스트 보여주는 갯수 변경 
		// $("#list_cnt").change(function(){
		$("#list_cnt").on('change', function(){
			document.body.style.cursor = "wait";
			globalgetListCount = $("#list_cnt option:selected").val();
			eventSearchItem(1);
			document.body.style.cursor = "default";
		});
	}
</script>
</body>
</html>