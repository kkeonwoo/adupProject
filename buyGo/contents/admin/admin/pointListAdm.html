<!DOCTYPE html>
<html lang="ko">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">

	<link rel="shortcut icon" href="../../../adminLayer/favicon.ico" type="image/x-icon" />
	<link rel="icon" href="../../../adminLayer/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../../../adminLayer/main/resources/css/admin/admin.css">
    <link rel="stylesheet" href="../../../adminLayer/main/resources/css/admin/jquery-ui.css">
    <link rel="stylesheet" href="../../../adminLayer/main/resources/css/admin/swiper.css">

	<!-- <script src="../../../adminLayer/resources/js/plugin/jquery.min.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/jquery-ui.min.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/jquery.form.min.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/jquery.cookie.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/jquery.fileDownload.js?"></script> -->

	<!-- <script src="../../../adminLayer/resources/js/plugin/ckeditor/ckeditor.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/ckeditor/adapters/jquery.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/microfiche.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/Chart.min.js?"></script>
	<script src="../../../adminLayer/resources/js/plugin/printThis.js?"></script> -->

	<!-- <script src="../../../adminLayer/resources/js/common/common.js?"></script>
	<script src="../../../adminLayer/resources/js/common/base.js?"></script>
	<script src="../../../adminLayer/resources/js/common/swiper.js?"></script>
	<script src="../../../adminLayer/resources/js/common/zipcode.js?"></script>
	<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js?"></script>
	<link rel="stylesheet" href="../../../adminLayer/resources/css/admin/member/buyerList.css">
	<script src="../../../adminLayer/resources/js/admin/member/buyerList.js"></script> -->
	
	<!-- -----------윤희상 html 공통부분 START------------- -->
	<script defer type="text/javascript" src="../../../adminLayer/main/js/common/cFuncs.js"></script>
    <script defer type="text/javascript" src="../../../adminLayer/common/js/cPagingModule.js"></script>
    <script defer type="text/javascript" src="../../../adminLayer/main/js/admin/cGetAdminCommonModule.js"></script>
    <script defer type="text/javascript" src="../../../adminLayer/main/js/admin/cGetAdminPageMenu.js"></script>
	<script defer type="text/javascript" src="../../../adminLayer/main/js/admin/cPointListAdm.js"></script>
    <!-- <script type="text/javascript" src="../../../adminLayer/resources/js/admin/productManagement/pmList.js?"></script> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- <link rel="stylesheet" type="text/css" href="../../../adminLayer/commonpf2.css"/> -->
    <script type="text/javascript" src="../../../adminLayer/common/resources/jquery/jquery-3.6.0.min.js"></script>
    <!-- <script type="text/javascript" src="../../../adminLayer/jquery.ajax-cross-origin.min.js"></script> -->
    <!-- <script type="text/javascript" src="../../../adminLayer/jquery-ui.js"></script> -->
    <script type="text/javascript" src="../../../adminLayer/main/js/jquery-ui.min.js"></script>

    <!-- 엑셀 다운로드를 위해서 필요한 모듈임 -->
    <script defer type="text/javascript" src="../../../adminLayer/main/js/common/jsonToXMLToExcel.js"></script>
    <!-- <script type="text/javascript" src="../../../adminLayer/xlsx.full.min.js"></script> -->
    <script type="text/javascript" src="../../../adminLayer/FileSaver.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.3.0/exceljs.min.js"></script>

    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--아래 한줄은 http, https reidirection에 따른 ajax 통신 문제시 content mixed문제를 조정하기 위해 추가함-->
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/> -->
    <!--이미지 도구모음 금지-->
    <meta http-equiv="imagetoolbar" context="no"></head>
    <!--아래 2줄은 ajax호출시 header, token을 같이 넘길때 undefined error가 발생하므로 반드시 추가해야 함-->
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <!-- ----------------------------------------------------------------------- -->
    <!-- iOS Part -->
    <!-- 주소창 등의 웹 브라우저 UI를 표시하지 않기 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- 상태 바의 스타일을 지정 -->
    <!-- <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">-->
    <!-- 홈 화면에서 표시되는 앱 이름을 지정 -->
    <!-- <meta name="apple-mobile-web-app-title" content="Timer">-->
    <!-- 홈 화면에서 표시되는 앱 아이콘을 지정 -->
    <!-- <link rel="apple-touch-icon" href="icons/icon-152x152.png">-->
    <link rel="apple-touch-icon" href="touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="152x152" href="touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="167x167" href="touch-icon-ipad-retina.png">
    <link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-retina.png">
    <!-- Android part -->
    <!-- 웹 앱 매니페스트를 읽어 들이기 -->
    <link rel="manifest" type="text/json"  href="../../../adminLayer/manifest.json">
    <script>history.replaceState({}, null, location.pathname);</script>
    <!-- -----------윤희상 html 공통부분 END------------- -->
	<title>포인트내역</title>
</head>
<body>
<div class="wrap">
	<div class="header">
		<div class="top">
			<h1>
				<img src="../../../adminLayer/main/resources/images/admin/admin_header_logo.png" alt="나들가게 이음몰" onclick="location.href='/main/html/admin/totalOrderListAdm.html';" style="cursor:pointer;"> 
				<img src="../../../adminLayer/main/resources/images/admin/sitetit.gif" alt="통합관리자" onclick="location.href='/main/html/admin/totalOrderListAdm.html';" style="cursor:pointer;">
			</h1>
			<div class="logout">
            </div>
		</div>
		<ul class="gnb" id="gnb">
		</ul>
	</div>
	<!-- //header -->

	<!-- container -->
	<div class="container">
				
		<div class="lnb" id="lnb">
		</div>

		<!-- contents -->
		<div class="contents">
			<h3>포인트내역</h3>
			<form id="frm" name="frm" action="../../../adminLayer/admin/member/pointList" method="post">
				<div class="search_area">
					<table class="table_row">
						<colgroup><col width="120" /><col width="280" /><col width="120" /><col width="*" /></colgroup>
						<tr>
							<th><span>상호</span></th>
							<td><input type="text" name="search_biz_name" value="" /></td>
							<th><span>사업자번호</span></th>
							<td><input type="text" name="search_biz_ssn" value="" maxlength="10" /></td>
						</tr>
						<tr>
							<th><span>포인트구분</span></th>
							<td>
								<select name="search_point_type" id="search_point_type" value="">
								</select>
							</td>
							<th><span>적립구분</span></th>
							<td>
								<select name="search_point_chadae_type" id="search_point_chadae_type" style="width:130px;" value="">
									<option value="">전체</option>
									<option value="1">적립</option>
									<option value="2">차감</option>
								</select>
							</td>
						</tr>
						<tr>
							<th><span>적립일</span></th>
							<td colspan="3">
								<input type="text" id="reg_date_start" name="search_reg_date_start" class="w84 datepicker1" value="" /> ~ 
								<input type="text" id="reg_date_end" name="search_reg_date_end" class="w84 datepicker1" value="" />
							<span class="search_scope">
								<button type="button" class="btn_ss01" onclick="setToday('reg_date_start'); setToday('reg_date_end');"><span>오늘</span></button>
								<button type="button" class="btn_ss01" onclick="setDatePrev('reg_date_start',7); setToday('reg_date_end');"><span>7일간</span></button>
								<button type="button" class="btn_ss01" onclick="setDatePrev('reg_date_start',15); setToday('reg_date_end');"><span>15일간</span></button>
								<button type="button" class="btn_ss01" onclick="setDatePrev('reg_date_start',30); setToday('reg_date_end');"><span>30일간</span></button>
								<button type="button" class="btn_ss01" onclick="setDatePrev('reg_date_start',60); setToday('reg_date_end');"><span>60일간</span></button>
							</span>
							</td>
						</tr>
					</table>
					<div class="search_btn">
						<button type="button" class="btn_bic">검색</button>
					</div>
				</div>			
				<div class="result_area">
					<div class="result_info">
						<p class="txt_total">총 <strong id="txt_total_count"></strong> 개</p>
						<input type="hidden" id="totalCount" value="1" />
						<input type="hidden" id="TP" name="TP" value="" />
						<div class="btn_down">
							<button type="button" class="btn_ss01" onclick="excelDownload();"><span class="btn_excel">목록 다운로드</span></button>
							<select name="list_cnt" id="list_cnt" style="width:55px;" value="10">
								<option value="10">10</option>
								<option value="50">50</option>
								<option value="100">100</option>
								<option value="300">300</option>
							</select>
						</div>	
					</div>
					<table class="table_col">
						<colgroup><col width="45" />
						<col width="150" />
						<col width="*" />
						<col width="70" />
						<col width="70" />
						<col width="70" />
						<col width="120" />
						<col width="150" />
						</colgroup>
						<thead>
							<tr>
								<th>번호</th>
								<th>회원</th>
								<th>포인트구분</th>
								<th>적립</th>
								<th>차감</th>
								<th>잔액</th>
								<th>참조</th>
								<th>일시</th>
							</tr>
						</thead>
						<tbody id="adm_point_list">						
						</tbody>
					</table>
					<div class="table_btns">
					</div>								
					<div class="page" id="pagingDiv">
					</div>
				</div>
			</form>
		</div>
		<!-- //contents -->
	</div>
	<!-- //container -->
</div>
<script type="text/javascript">
	var pageinfo = {totalCount: 0, countPerPage: 10, nowPage: 1};
	
	// function btnExpiratIonPointDae() {
	// 	sendAjaxTarget("frm", "/admin/member/PointDae_process", "ajaxHandler");
	// };
	
	// // 상품코드
	// function ajaxHandler(data) {
	// 	alert('포인트소멸 완료'+data);
	// };

	$(document).ready(function(){
		getMenuListAjax("pointListAdm.html", initPage);
	});
	function initPage(){
		$.datepicker.setDefaults({
			dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
			dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'], 
			monthNamesShort: ['1','2','3','4','5','6','7','8','9','10','11','12'],
			monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
			yearSuffix: '년',
			dateFormat: 'yy-mm-dd',
			showOn: "both",
			buttonImage : "/main/resources/images/common/calendar.png",
			buttonImageOnly: true,
			showMonthAfterYear:true,
			constrainInput: true,
			changeMonth: true,
			changeYear: true    
		});
		$('input[name="search_reg_date_start"]').datepicker();
		$('input[name="search_reg_date_end"]').datepicker();
		$('input[name="search_reg_date_start"]').datepicker("setDate", "today");
		$('input[name="search_reg_date_end"]').datepicker("setDate", "today");
		
		//전역변수
		//var gTotalData;
		//var globalCurrentPage = 1;
		//var globalgetListCount;
		viewPointTypeListOption(function(){
			$('*').css('cursor','wait');
			//globalgetListCount = $("#list_cnt option:selected").val(); //한 페이지에 보여주는 List 갯수
			pageinfo.countPerPage = $("#list_cnt option:selected").val(); //한 페이지에 보여주는 List 갯수
			pageinfo.nowPage = 1;
			eventSearchPointList(pageinfo);
			$('*').css('cursor','default');
		});

		//검색버튼 클릭
		// $(".btn_bic").click(function(){
		$(".btn_bic").on('click', function(){
			pageinfo.countPerPage = $("#list_cnt option:selected").val(); //한 페이지에 보여주는 List 갯수
			pageinfo.nowPage = 1;
			eventSearchPointList(pageinfo);
		});

		//리스트 보여주는 갯수 변경 
		// $("#list_cnt").change(function(){
		$("#list_cnt").on('change', function(){
			$('*').css('cursor','wait');
			pageinfo.countPerPage = $("#list_cnt option:selected").val(); //한 페이지에 보여주는 List 갯수
			pageinfo.nowPage = 1;
			eventSearchPointList(pageinfo);
			$('*').css('cursor','default');
		});
	}
</script>
</body>
</html>
